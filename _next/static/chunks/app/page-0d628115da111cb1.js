(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3395:(e,a,s)=>{Promise.resolve().then(s.bind(s,3792))},3792:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});var t=s(5155),r=s(2115),l=s(8334),c=s.n(l);let n=[{key:"北京",value:"110000"},{key:"上海",value:"310000"},{key:"广州",value:"440100"},{key:"深圳",value:"440300"},{key:"杭州",value:"330100"},{key:"成都",value:"510100"},{key:"重庆",value:"500000"},{key:"长沙",value:"430100"}],i=()=>{let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(n[0]),[i,o]=(0,r.useState)(!0),[d,_]=(0,r.useState)(null),p=async e=>{o(!0),_(null);try{var s,t,r,l;let c=await fetch("https://restapi.amap.com/v3/weather/weatherInfo?city=".concat(e.value,"&key=").concat("539d9563ba0bbc04840e92cc33dfb6bf","&extensions=all"));if(!c.ok)throw Error("HTTP error! status: ".concat(c.status));let n=await c.json();if(console.log(n,"data"),!(null==(t=n.forecasts)||null==(s=t[0])?void 0:s.casts))return;a(null==(l=n.forecasts)||null==(r=l[0])?void 0:r.casts)}catch(e){_("无法获取天气数据，请检查城市名称或稍后再试"),console.error("Error fetching weather data:",e)}finally{o(!1)}};return(0,r.useEffect)(()=>{p(s)},[s]),(0,t.jsxs)("div",{className:c().app,children:[(0,t.jsxs)("header",{className:c().header,children:[(0,t.jsxs)("h1",{children:[s.key,"城市天气预报"]}),(0,t.jsx)("div",{className:c().citySelector,children:(0,t.jsx)("select",{value:s.value,onChange:e=>{let a=e.target.value;l(n.find(e=>e.value===a)||n[0])},disabled:i,children:n.map(e=>(0,t.jsx)("option",{value:e.value,children:e.key},e.value))})})]}),i?(0,t.jsx)("div",{className:c().loading,children:"加载中..."}):d?(0,t.jsx)("div",{className:c().error,children:d}):(0,t.jsx)("div",{className:c().forecastContainer,children:e.map(e=>(0,t.jsxs)("div",{className:c().forecastCard,children:[(0,t.jsx)("h3",{children:e.date}),(0,t.jsx)("p",{className:c().weatherDesc,children:e.dayweather}),(0,t.jsxs)("div",{className:c().tempContainer,children:[(0,t.jsxs)("span",{className:c().tempMax,children:[e.daytemp_float,"\xb0C"]}),(0,t.jsxs)("span",{className:c().tempMin,children:[e.nighttemp_float,"\xb0C"]})]})]},e.date))})]})}},8334:e=>{e.exports={app:"page_app__uoD_J",header:"page_header__kVzhN",cityForm:"page_cityForm__dm6u5",forecastContainer:"page_forecastContainer__ZR5JX",forecastCard:"page_forecastCard__yLJMg",weatherDesc:"page_weatherDesc__XAzf0",tempContainer:"page_tempContainer__axCdx",tempMax:"page_tempMax___VM2R",tempMin:"page_tempMin__5Qa6O",loading:"page_loading__Q7rym",error:"page_error__Jil8M"}}},e=>{var a=a=>e(e.s=a);e.O(0,[397,441,684,358],()=>a(3395)),_N_E=e.O()}]);